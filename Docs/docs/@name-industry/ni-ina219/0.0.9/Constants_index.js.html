<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Constants/index.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BaseRegisterModel.html">BaseRegisterModel</a><ul class='methods'><li data-type='method'><a href="BaseRegisterModel.html#.formatData#formatData">formatData</a></li><li data-type='method'><a href="BaseRegisterModel.html#.getCurrentValues#getCurrentValues">getCurrentValues</a></li><li data-type='method'><a href="BaseRegisterModel.html#.getCurrentValues#getCurrentValues">getCurrentValues</a></li><li data-type='method'><a href="BaseRegisterModel.html#.hydrate#hydrate">hydrate</a></li></ul></li><li><a href="BusVoltage.html">BusVoltage</a></li><li><a href="BusVoltageModel.html">BusVoltageModel</a><ul class='methods'><li data-type='method'><a href="BusVoltageModel.html#.calculateValue#calculateValue">calculateValue</a></li></ul></li><li><a href="Calibration.html">Calibration</a><ul class='methods'><li data-type='method'><a href="Calibration.html#.getCalculationValues#getCalculationValues">getCalculationValues</a></li><li data-type='method'><a href="Calibration.html#.getCalibration#getCalibration">getCalibration</a></li><li data-type='method'><a href="Calibration.html#.setCalibrationByTemplate#setCalibrationByTemplate">setCalibrationByTemplate</a></li><li data-type='method'><a href="Calibration.html#.setCustomCalibration#setCustomCalibration">setCustomCalibration</a></li><li data-type='method'><a href="Calibration.html#.triggerCalibration#triggerCalibration">triggerCalibration</a></li></ul></li><li><a href="CalibrationModel.html">CalibrationModel</a><ul class='methods'><li data-type='method'><a href="CalibrationModel.html#.getCalibrationValues#getCalibrationValues">getCalibrationValues</a></li><li data-type='method'><a href="CalibrationModel.html#.setActiveTemplate#setActiveTemplate">setActiveTemplate</a></li><li data-type='method'><a href="CalibrationModel.html#.setCustomCalibrationValues#setCustomCalibrationValues">setCustomCalibrationValues</a></li></ul></li><li><a href="ChargeRemainingModel.html">ChargeRemainingModel</a><ul class='methods'><li data-type='method'><a href="ChargeRemainingModel.html#.calculateValue#calculateValue">calculateValue</a></li><li data-type='method'><a href="ChargeRemainingModel.html#.formatData#formatData">formatData</a></li></ul></li><li><a href="Configuration.html">Configuration</a><ul class='methods'><li data-type='method'><a href="Configuration.html#.getConfiguration#getConfiguration">getConfiguration</a></li><li data-type='method'><a href="Configuration.html#.setConfiguration#setConfiguration">setConfiguration</a></li><li data-type='method'><a href="Configuration.html#.setConfigurationBADC#setConfigurationBADC">setConfigurationBADC</a></li><li data-type='method'><a href="Configuration.html#.setConfigurationByTemplate#setConfigurationByTemplate">setConfigurationByTemplate</a></li><li data-type='method'><a href="Configuration.html#.setConfigurationMode#setConfigurationMode">setConfigurationMode</a></li><li data-type='method'><a href="Configuration.html#.setConfigurationMode#setConfigurationMode">setConfigurationMode</a></li><li data-type='method'><a href="Configuration.html#.setConfigurationPGA#setConfigurationPGA">setConfigurationPGA</a></li><li data-type='method'><a href="Configuration.html#.setConfigurationSADC#setConfigurationSADC">setConfigurationSADC</a></li></ul></li><li><a href="ConfigurationModel.html">ConfigurationModel</a><ul class='methods'><li data-type='method'><a href="ConfigurationModel.html#.editConfigurationBADC#editConfigurationBADC">editConfigurationBADC</a></li><li data-type='method'><a href="ConfigurationModel.html#.editConfigurationBRNG#editConfigurationBRNG">editConfigurationBRNG</a></li><li data-type='method'><a href="ConfigurationModel.html#.editConfigurationMode#editConfigurationMode">editConfigurationMode</a></li><li data-type='method'><a href="ConfigurationModel.html#.editConfigurationPGain#editConfigurationPGain">editConfigurationPGain</a></li><li data-type='method'><a href="ConfigurationModel.html#.editConfigurationSADC#editConfigurationSADC">editConfigurationSADC</a></li><li data-type='method'><a href="ConfigurationModel.html#.getCurrentConfiguration#getCurrentConfiguration">getCurrentConfiguration</a></li><li data-type='method'><a href="ConfigurationModel.html#.setActiveTemplate#setActiveTemplate">setActiveTemplate</a></li></ul></li><li><a href="Current.html">Current</a></li><li><a href="CurrentModel.html">CurrentModel</a><ul class='methods'><li data-type='method'><a href="CurrentModel.html#.calculateValue#calculateValue">calculateValue</a></li></ul></li><li><a href="Device.html">Device</a><ul class='methods'><li data-type='method'><a href="Device.html#.getDeviceInformation#getDeviceInformation">getDeviceInformation</a></li><li data-type='method'><a href="Device.html#.initialize#initialize">initialize</a></li></ul></li><li><a href="I2cBus.html">I2cBus</a><ul class='methods'><li data-type='method'><a href="I2cBus.html#.getConnectedDevices#getConnectedDevices">getConnectedDevices</a></li><li data-type='method'><a href="I2cBus.html#.initialize#initialize">initialize</a></li><li data-type='method'><a href="I2cBus.html#.readRegister#readRegister">readRegister</a></li><li data-type='method'><a href="I2cBus.html#.updateState#updateState">updateState</a></li><li data-type='method'><a href="I2cBus.html#.writeRegister#writeRegister">writeRegister</a></li></ul></li><li><a href="NI_INA219.html">NI_INA219</a><ul class='methods'><li data-type='method'><a href="NI_INA219.html#.getBusVoltage#getBusVoltage">getBusVoltage</a></li><li data-type='method'><a href="NI_INA219.html#.getCalibration#getCalibration">getCalibration</a></li><li data-type='method'><a href="NI_INA219.html#.getChargeRemaining#getChargeRemaining">getChargeRemaining</a></li><li data-type='method'><a href="NI_INA219.html#.getConfiguration#getConfiguration">getConfiguration</a></li><li data-type='method'><a href="NI_INA219.html#.getCurrent#getCurrent">getCurrent</a></li><li data-type='method'><a href="NI_INA219.html#.getDeviceInformation#getDeviceInformation">getDeviceInformation</a></li><li data-type='method'><a href="NI_INA219.html#.getPower#getPower">getPower</a></li><li data-type='method'><a href="NI_INA219.html#.getPowerSupplyVoltage#getPowerSupplyVoltage">getPowerSupplyVoltage</a></li><li data-type='method'><a href="NI_INA219.html#.getShuntVoltage#getShuntVoltage">getShuntVoltage</a></li><li data-type='method'><a href="NI_INA219.html#.initialize#initialize">initialize</a></li><li data-type='method'><a href="NI_INA219.html#.setConfigurationByTemplateId#setConfigurationByTemplateId">setConfigurationByTemplateId</a></li></ul></li><li><a href="Power.html">Power</a></li><li><a href="PowerModel.html">PowerModel</a><ul class='methods'><li data-type='method'><a href="PowerModel.html#.calculateValue#calculateValue">calculateValue</a></li></ul></li><li><a href="PowerSupplyModel.html">PowerSupplyModel</a><ul class='methods'><li data-type='method'><a href="PowerSupplyModel.html#.calculateValue#calculateValue">calculateValue</a></li><li data-type='method'><a href="PowerSupplyModel.html#.formatData#formatData">formatData</a></li></ul></li><li><a href="ShuntVoltage.html">ShuntVoltage</a></li><li><a href="ShuntVoltageModel.html">ShuntVoltageModel</a><ul class='methods'><li data-type='method'><a href="ShuntVoltageModel.html#.calculateValue#calculateValue">calculateValue</a></li></ul></li><li><a href="Utilities.html">Utilities</a><ul class='methods'><li data-type='method'><a href="Utilities.html#.mappedLabelsAndBits#mappedLabelsAndBits">mappedLabelsAndBits</a></li><li data-type='method'><a href="Utilities.html#.registerAsBinaryString#registerAsBinaryString">registerAsBinaryString</a></li></ul></li><li><a href="WSchargeRemaining.html">WSchargeRemaining</a></li><li><a href="WSpowerSupplyVoltage.html">WSpowerSupplyVoltage</a></li></ul><h3>Global</h3><ul><li><a href="global.html#TEMPLATES">TEMPLATES</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">Constants/index.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * CONSTANTS
 * 
 */


// default 12c address of WaveShare UPS INA219
const DEFAULT_I2C_ADDRESS = 0x42;

// Rasp 4B I2c bus active on 1
const DEFAULT_I2C_BUS = 1;

// REGISTERS

// Referenced from PDF, pg 18 Registers
// {label}_{read/write} = Pointer Address in Hex
// ====================================================

export const REGISTERS = {
    CONFIG_RW: 0x00, // chip reset/configuration
    SHUNT_VOLTAGE_R: 0x01,// measurement.
    BUS_VOLTAGE_R: 0x02, // measurement. defaults to 0 due to CALIBRATION default to 0
    POWER_R: 0x03, // measurement. defaults to 0 due to CALIBRATION default to 0
    CURRENT_R: 0x04, // current flowing through the shunt resistor
    CALIBRATION_RW: 0x05 // reset or power on defaults to 0
}

// Referenced from PDF, pg 19 Registers
// Address in Hex
// ====================================================

const CONFIGURATION = {
    RESET: {
        TRIGGER: 0x01 // self-clears
    },
    BUS_VOLTAGE_RANGE: {
        RANGE_16V: 0x00, // set bus voltage range to 16V
        RANGE_32V: 0x01  // set bus voltage range to 32V (default)
    },
    GAIN: {
        DIV_1_40MV: 0x00, // shunt prog. gain set to  1, 40 mV range
        DIV_2_80MV: 0x01, // shunt prog. gain set to /2, 80 mV range
        DIV_4_160MV: 0x02,// shunt prog. gain set to /4, 160 mV range
        DIV_8_320MV: 0x03,// shunt prog. gain set to /8, 320 mV range (default)
    },
    // Edited and cross checked 11/10/2022 PDF revised DEC 2015
    // x - denotes not counted can be set to anything
    BUS_ADC_RESOLUTION: {
        // Mode - resolution
        ADCRES_9BIT_1S: 0x00,  //  9  bit,  1 sample,     84us [0 x 0 0]
        ADCRES_10BIT_1S: 0x01,  //  10 bit,  1 sample,    148us [0 x 0 1]
        ADCRES_11BIT_1S: 0x02,  //  11 bit,  1 sample,    276us [0 x 1 0]
        // - next 2 are same according to PDF pg 20 table 5 
        // ADCRES_12BIT_XS is not in other libs 
        ADCRES_12BIT_1S: 0x03,  //  12 bit,  1 sample,    532us [0 x 1 1]
        ADCRES_12BIT_XS: 0x08,  //  12 bit,  ? samples,   532us [1 0 0 0]
        // Samples - assumed 12bit ?
        ADCRES_12BIT_2S: 0x09,  //  12 bit,   2 samples,  1.06ms [1 0 0 1]
        ADCRES_12BIT_4S: 0x0A,  //  12 bit,   4 samples,  2.13ms [1 0 1 0]
        ADCRES_12BIT_8S: 0x0B,  //  12 bit,   8 samples,  4.26ms [1 0 1 1]
        ADCRES_12BIT_16S: 0x0C,  //  12 bit,  16 samples,  8.51ms [1 1 0 0]
        ADCRES_12BIT_32S: 0x0D,  //  12 bit,  32 samples, 17.02ms [1 1 0 1] (default)
        ADCRES_12BIT_64S: 0x0E,  //  12 bit,  64 samples, 34.05ms [1 1 1 0]
        ADCRES_12BIT_128S: 0x0F,  //  12 bit, 128 samples, 68.10ms [1 1 1 1]
    },
    // Note: same values and table for shunt values
    //       duplicated just for completion
    // Edited and cross checked 11/10/2022 PDF revised DEC 2015
    // x - denotes not counted can be set to anything
    SHUNT_ADC_RESOLUTION: {
        // Mode - resolution
        ADCRES_9BIT_1S: 0x00,  //  9  bit,  1 sample,     84us [0 x 0 0]
        ADCRES_10BIT_1S: 0x01,  //  10 bit,  1 sample,    148us [0 x 0 1]
        ADCRES_11BIT_1S: 0x02,  //  11 bit,  1 sample,    276us [0 x 1 0]
        // - next 2 are same according to PDF pg 20 table 5 
        // ADCRES_12BIT_XS is not in other libs 
        ADCRES_12BIT_1S: 0x03,  //  12 bit,  1 sample,    532us [0 x 1 1]
        ADCRES_12BIT_XS: 0x08,  //  12 bit,  ? samples,   532us [1 0 0 0]
        // Samples - assumed 12bit ?
        ADCRES_12BIT_2S: 0x09,  //  12 bit,   2 samples,  1.06ms [1 0 0 1]
        ADCRES_12BIT_4S: 0x0A,  //  12 bit,   4 samples,  2.13ms [1 0 1 0]
        ADCRES_12BIT_8S: 0x0B,  //  12 bit,   8 samples,  4.26ms [1 0 1 1]
        ADCRES_12BIT_16S: 0x0C,  //  12 bit,  16 samples,  8.51ms [1 1 0 0]
        ADCRES_12BIT_32S: 0x0D,  //  12 bit,  32 samples, 17.02ms [1 1 0 1] (default)
        ADCRES_12BIT_64S: 0x0E,  //  12 bit,  64 samples, 34.05ms [1 1 1 0]
        ADCRES_12BIT_128S: 0x0F,  //  12 bit, 128 samples, 68.10ms [1 1 1 1]
    },
    MODE: {
        POWERDOWN: 0x00, // power down apply it to bits 2,1,0 in the register 
        SVOLT_TRIGGERED: 0x01, // shunt voltage triggered
        BVOLT_TRIGGERED: 0x02, // bus voltage triggered
        SANDBVOLT_TRIGGERED: 0x03, // shunt and bus voltage triggered
        ADCOFF: 0x04, // ADC off
        SVOLT_CONTINUOUS: 0x05, // shunt voltage continuous
        BVOLT_CONTINUOUS: 0x06, // bus voltage continuous
        SANDBVOLT_CONTINUOUS: 0x07, // shunt and bus voltage continuous (default)
    }
}

/**
 * Calibration Templates
 * Note: DEFAULT used for resetting the chip to defaults
 *       same as power on values
 */
export const TEMPLATES = {
    "IDS": ["DEFAULT", "32V2A"],
    "DEFAULT": { // 00111001 10011111
        busVoltageMax: 32,
        shuntResistanceOhms: 0.1,
        gainVoltage: 0.32,
        currentMaxExpected: 3.2,
        registerAsDecimal:
            CONFIGURATION.RESET.TRIGGER &lt;&lt; 15,
        config:
            CONFIGURATION.RESET.TRIGGER &lt;&lt; 15
    },
    "32V2A": { // 00111110 11101111
        busVoltageMax: 32,
        shuntResistanceOhms: 0.1,
        gainVoltage: 0.32,
        currentMaxExpected: 3.2,
        registerAsDecimal:
            CONFIGURATION.BUS_VOLTAGE_RANGE.RANGE_32V &lt;&lt; 13 |
            CONFIGURATION.GAIN.DIV_8_320MV &lt;&lt; 11 |
            CONFIGURATION.BUS_ADC_RESOLUTION.ADCRES_12BIT_32S &lt;&lt; 7 |
            CONFIGURATION.SHUNT_ADC_RESOLUTION.ADCRES_12BIT_32S &lt;&lt; 3 |
            CONFIGURATION.MODE.SANDBVOLT_CONTINUOUS,
        config:
            CONFIGURATION.BUS_VOLTAGE_RANGE.RANGE_32V &lt;&lt; 13 |
            CONFIGURATION.GAIN.DIV_8_320MV &lt;&lt; 11 |
            CONFIGURATION.BUS_ADC_RESOLUTION.ADCRES_12BIT_32S &lt;&lt; 7 |
            CONFIGURATION.SHUNT_ADC_RESOLUTION.ADCRES_12BIT_32S &lt;&lt; 3 |
            CONFIGURATION.MODE.SANDBVOLT_CONTINUOUS
    }
}

// export const Templates = TEMPLATES;

export const Constants = {
    DEFAULT_I2C_ADDRESS: DEFAULT_I2C_ADDRESS,
    DEFAULT_I2C_BUS: DEFAULT_I2C_BUS,
    REGISTERS: REGISTERS,
    CONFIGURATION: CONFIGURATION,
    CALIBRATION_TEMPLATES: TEMPLATES,
    TEMPLATES: TEMPLATES
}</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> on Sat Dec 03 2022 18:09:20 GMT-0500 (Eastern Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
